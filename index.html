<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Valentine ğŸ’˜</title>

  <!-- Tailwind -->
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>

  <!-- Confetti -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

  <style type="text/tailwindcss">
    @theme {
      --color-clifford: #da373d;
    }
  </style>

  <style>
    /* ğŸš« prevent mobile scroll interference */
    button {
      touch-action: manipulation;
    }
  </style>
</head>

<body class="min-h-screen flex items-center justify-center bg-pink-100 overflow-hidden">

  <div class="relative text-center p-8 m-3 bg-white rounded-3xl shadow-xl max-w-sm w-full">

    <h1 class="text-4xl font-bold text-clifford mb-4">Valentine ğŸ’–</h1>

    <img src="./images/couple.png" alt="proposing" class="mx-auto w-48 h-48 object-cover rounded-full shadow-md" />

    <p class="mt-6 text-xl font-bold">Will you marry me? ğŸ’</p>

    <div id="btnArea" class="mt-8 relative h-28">

      <!-- YES -->
      <button id="yesBtn" class="px-6 py-3 bg-green-500 text-white rounded-lg text-lg
               transition-transform duration-300">
        Yes ğŸ’˜
      </button>

      <!-- NO -->
      <button id="noBtn" class="absolute mr-14 px-6 py-3 bg-red-500 text-white rounded-lg text-lg select-none">
        No ğŸ˜¢
      </button>

    </div>
  </div>

  <audio id="loveSound" preload="auto">
    <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_6c2b08c1f0.mp3">
  </audio>

  <script>
    const yesBtn = document.getElementById("yesBtn");
    const noBtn = document.getElementById("noBtn");
    const btnArea = document.getElementById("btnArea");
    const loveSound = document.getElementById("loveSound");

    let attempts = 0;

    noBtn.style.left = "50%";
    noBtn.style.top = "0";
    noBtn.style.transform = "translateX(-50%)";

    function escapeNo(e) {
      e.preventDefault(); 
      attempts++;

      navigator.vibrate?.(100);

      yesBtn.style.transform = `scale(${1 + attempts * 0.18})`;

      const area = btnArea.getBoundingClientRect();
      const maxX = area.width - noBtn.offsetWidth;
      const maxY = area.height - noBtn.offsetHeight;

      const x = Math.random() * maxX;
      const y = Math.random() * maxY;

      noBtn.style.left = `${x}px`;
      noBtn.style.top = `${y}px`;
      noBtn.style.transform = "translate(0,0)";

      if (attempts >= 5) {
        noBtn.classList.add("hidden");
      }
    }

    noBtn.addEventListener("pointerdown", escapeNo);

    yesBtn.addEventListener("pointerdown", () => {
      loveSound.play();

      confetti({
        particleCount: 200,
        spread: 100,
        origin: { y: 0.6 }
      });

      setTimeout(() => {
        window.location.href = "love.html";
      }, 1200); 
    });

  </script>

</body>

</html>